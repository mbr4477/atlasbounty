{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm/legacy lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","domain/GetFitnessData.ts","domain/ConvertDataToValue.ts","domain/GetFirebase.ts","domain/GetSubscribedTier.ts","domain/GetPeriodStartDate.ts","domain/GetUserData.ts","app/TitleBar.tsx","app/home/Home.tsx","app/signin/SignIn.tsx","domain/GetSubscriptionTiers.ts","domain/SubscribeToTier.ts","app/signup/SignUp.tsx","domain/UnsubscribeFromTier.ts","app/settings/Settings.tsx","App.tsx","serviceWorker.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","GetFitnessData","accessToken","startDate","endDate","callback","requestData","getTime","request","post","json","headers","error","res","body","console","log","result","bucket","flatMap","dataset","set","point","value","val","intVal","reduce","a","b","ConvertDataToValue","data","tier","dataValue","Math","floor","steps","amount","min","cost","points","GetFirebase","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","GetSubscribedTier","uid","db","firestore","collection","doc","get","snapshot","exists","tierId","catch","err","GetPeriodStartDate","period","userData","date","Date","setDate","billingDayOfMonth","getDate","setMonth","getMonth","setHours","GetUserData","TitleBar","props","state","profileImage","showClose","this","setState","color","slot","style","width","height","marginLeft","src","to","marginRight","icon","settings","size","React","Component","flexContainer","display","justifyContent","alignItems","Home","redirectToLogin","redirectToSignUp","givenName","currentUser","userLoaded","onAuthStateChanged","user","token","localStorage","getItem","start","photoURL","displayName","className","fontSize","informationCircle","toLocaleString","toUpperCase","star","flexGrow","SignIn","redirectToHome","provider","GoogleAuthProvider","addScope","signInWithPopup","credential","setItem","onClick","signin","GetSubscriptionTiers","tiers","docs","SubscribeToTier","done","app","auth","next","dayOfMonth","nextBillingDate","cancelAfterNextBilling","merge","SignUp","signOut","removeItem","didClickTier","name","description","logout","fill","UnsubscribeFromTier","Settings","tierName","userId","seconds","toLocaleDateString","href","process","textAlign","button","unsubscribe","disabled","App","document","title","basename","path","component","exact","render","Boolean","window","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qIAAA,IAAIA,EAAM,CACT,2CAA4C,CAC3C,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,qBAAsB,CACrB,IACA,IAED,uCAAwC,CACvC,IACA,IAED,sCAAuC,CACtC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,kCAAmC,CAClC,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAi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","file":"static/js/main.d5700689.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet-controller_8.entry.js\": [\n\t\t458,\n\t\t43\n\t],\n\t\"./ion-action-sheet-ios.entry.js\": [\n\t\t459,\n\t\t44\n\t],\n\t\"./ion-action-sheet-md.entry.js\": [\n\t\t460,\n\t\t45\n\t],\n\t\"./ion-alert-ios.entry.js\": [\n\t\t461,\n\t\t24\n\t],\n\t\"./ion-alert-md.entry.js\": [\n\t\t462,\n\t\t25\n\t],\n\t\"./ion-app_8-ios.entry.js\": [\n\t\t463,\n\t\t11\n\t],\n\t\"./ion-app_8-md.entry.js\": [\n\t\t464,\n\t\t12\n\t],\n\t\"./ion-avatar_3-ios.entry.js\": [\n\t\t465,\n\t\t46\n\t],\n\t\"./ion-avatar_3-md.entry.js\": [\n\t\t466,\n\t\t47\n\t],\n\t\"./ion-back-button-ios.entry.js\": [\n\t\t467,\n\t\t48\n\t],\n\t\"./ion-back-button-md.entry.js\": [\n\t\t468,\n\t\t49\n\t],\n\t\"./ion-backdrop-ios.entry.js\": [\n\t\t469,\n\t\t81\n\t],\n\t\"./ion-backdrop-md.entry.js\": [\n\t\t470,\n\t\t82\n\t],\n\t\"./ion-button_2-ios.entry.js\": [\n\t\t471,\n\t\t50\n\t],\n\t\"./ion-button_2-md.entry.js\": [\n\t\t472,\n\t\t51\n\t],\n\t\"./ion-card_5-ios.entry.js\": [\n\t\t473,\n\t\t52\n\t],\n\t\"./ion-card_5-md.entry.js\": [\n\t\t474,\n\t\t53\n\t],\n\t\"./ion-checkbox-ios.entry.js\": [\n\t\t475,\n\t\t54\n\t],\n\t\"./ion-checkbox-md.entry.js\": [\n\t\t476,\n\t\t55\n\t],\n\t\"./ion-chip-ios.entry.js\": [\n\t\t477,\n\t\t56\n\t],\n\t\"./ion-chip-md.entry.js\": [\n\t\t478,\n\t\t57\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t479,\n\t\t83\n\t],\n\t\"./ion-datetime_3-ios.entry.js\": [\n\t\t480,\n\t\t20\n\t],\n\t\"./ion-datetime_3-md.entry.js\": [\n\t\t481,\n\t\t21\n\t],\n\t\"./ion-fab_3-ios.entry.js\": [\n\t\t482,\n\t\t58\n\t],\n\t\"./ion-fab_3-md.entry.js\": [\n\t\t483,\n\t\t59\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t484,\n\t\t84\n\t],\n\t\"./ion-infinite-scroll_2-ios.entry.js\": [\n\t\t485,\n\t\t39\n\t],\n\t\"./ion-infinite-scroll_2-md.entry.js\": [\n\t\t486,\n\t\t40\n\t],\n\t\"./ion-input-ios.entry.js\": [\n\t\t487,\n\t\t60\n\t],\n\t\"./ion-input-md.entry.js\": [\n\t\t488,\n\t\t61\n\t],\n\t\"./ion-item-option_3-ios.entry.js\": [\n\t\t489,\n\t\t62\n\t],\n\t\"./ion-item-option_3-md.entry.js\": [\n\t\t490,\n\t\t63\n\t],\n\t\"./ion-item_8-ios.entry.js\": [\n\t\t491,\n\t\t64\n\t],\n\t\"./ion-item_8-md.entry.js\": [\n\t\t492,\n\t\t65\n\t],\n\t\"./ion-loading-ios.entry.js\": [\n\t\t493,\n\t\t26\n\t],\n\t\"./ion-loading-md.entry.js\": [\n\t\t494,\n\t\t27\n\t],\n\t\"./ion-menu_4-ios.entry.js\": [\n\t\t495,\n\t\t18\n\t],\n\t\"./ion-menu_4-md.entry.js\": [\n\t\t496,\n\t\t19\n\t],\n\t\"./ion-modal-ios.entry.js\": [\n\t\t497,\n\t\t14\n\t],\n\t\"./ion-modal-md.entry.js\": [\n\t\t498,\n\t\t15\n\t],\n\t\"./ion-nav_5.entry.js\": [\n\t\t499,\n\t\t13\n\t],\n\t\"./ion-popover-ios.entry.js\": [\n\t\t500,\n\t\t16\n\t],\n\t\"./ion-popover-md.entry.js\": [\n\t\t501,\n\t\t17\n\t],\n\t\"./ion-progress-bar-ios.entry.js\": [\n\t\t502,\n\t\t66\n\t],\n\t\"./ion-progress-bar-md.entry.js\": [\n\t\t503,\n\t\t67\n\t],\n\t\"./ion-radio_2-ios.entry.js\": [\n\t\t504,\n\t\t32\n\t],\n\t\"./ion-radio_2-md.entry.js\": [\n\t\t505,\n\t\t33\n\t],\n\t\"./ion-range-ios.entry.js\": [\n\t\t506,\n\t\t68\n\t],\n\t\"./ion-range-md.entry.js\": [\n\t\t507,\n\t\t69\n\t],\n\t\"./ion-refresher_2-ios.entry.js\": [\n\t\t508,\n\t\t41\n\t],\n\t\"./ion-refresher_2-md.entry.js\": [\n\t\t509,\n\t\t42\n\t],\n\t\"./ion-reorder_2-ios.entry.js\": [\n\t\t510,\n\t\t37\n\t],\n\t\"./ion-reorder_2-md.entry.js\": [\n\t\t511,\n\t\t38\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t512,\n\t\t85\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t513,\n\t\t70\n\t],\n\t\"./ion-searchbar-ios.entry.js\": [\n\t\t514,\n\t\t28\n\t],\n\t\"./ion-searchbar-md.entry.js\": [\n\t\t515,\n\t\t29\n\t],\n\t\"./ion-segment_2-ios.entry.js\": [\n\t\t516,\n\t\t71\n\t],\n\t\"./ion-segment_2-md.entry.js\": [\n\t\t517,\n\t\t72\n\t],\n\t\"./ion-select_3-ios.entry.js\": [\n\t\t518,\n\t\t34\n\t],\n\t\"./ion-select_3-md.entry.js\": [\n\t\t519,\n\t\t35\n\t],\n\t\"./ion-slide_2-ios.entry.js\": [\n\t\t520,\n\t\t86\n\t],\n\t\"./ion-slide_2-md.entry.js\": [\n\t\t521,\n\t\t87\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t522,\n\t\t73\n\t],\n\t\"./ion-split-pane-ios.entry.js\": [\n\t\t523,\n\t\t88\n\t],\n\t\"./ion-split-pane-md.entry.js\": [\n\t\t524,\n\t\t89\n\t],\n\t\"./ion-tab-bar_2-ios.entry.js\": [\n\t\t525,\n\t\t74\n\t],\n\t\"./ion-tab-bar_2-md.entry.js\": [\n\t\t526,\n\t\t75\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t527,\n\t\t36\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t528,\n\t\t76\n\t],\n\t\"./ion-textarea-ios.entry.js\": [\n\t\t529,\n\t\t77\n\t],\n\t\"./ion-textarea-md.entry.js\": [\n\t\t530,\n\t\t78\n\t],\n\t\"./ion-toast-ios.entry.js\": [\n\t\t531,\n\t\t30\n\t],\n\t\"./ion-toast-md.entry.js\": [\n\t\t532,\n\t\t31\n\t],\n\t\"./ion-toggle-ios.entry.js\": [\n\t\t533,\n\t\t22\n\t],\n\t\"./ion-toggle-md.entry.js\": [\n\t\t534,\n\t\t23\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t535,\n\t\t90\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 234;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t539,\n\t\t98\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 235;\nmodule.exports = webpackAsyncContext;","import request from 'request';\n\nconst GetFitnessData = (\n    accessToken: string, \n    startDate: Date, \n    endDate: Date, \n    callback: (stepCount: number) => void\n) => {\n    const requestData = {    \n        \"aggregateBy\" : [{    \n            \"dataSourceId\": \"derived:com.google.step_count.delta:com.google.android.gms:estimated_steps\"    \n        }],    \n        \"bucketByTime\": { \"durationMillis\": 86400000 }, // This is 24 hours    \n        \"startTimeMillis\": startDate.getTime(),   // Start time    \n        \"endTimeMillis\": endDate.getTime() // End Time    \n    };\n    request.post('https://www.googleapis.com/fitness/v1/users/me/dataset:aggregate', {\n        json: requestData,\n        headers: {\n            'Authorization': 'Bearer ' + accessToken\n        }\n    }, (error: any, res: any, body: any) => {\n        if (error || body.error) {\n            console.log(body);\n            return;\n        }\n        const result = body.bucket.flatMap((bucket: any) => {\n            return bucket.dataset.flatMap((set: any) => {\n                return set.point.flatMap((point: any) => {\n                    return point.value.flatMap((val: any) => val.intVal);\n                });\n            });\n        }).reduce((a: number, b: number) => a + b, 0);\n        callback(result);\n    });\n}\n\nexport default GetFitnessData;","const ConvertDataToValue = (data: { steps:number }, tier: any): { amount: number, points: number} => {\n    const rate = 0.0001;\n    const dataValue = Math.floor(data.steps * rate * 100)/100;\n    const amount = Math.min(dataValue, tier.cost);\n    let points = 0;\n    if (dataValue > tier.cost) {\n        points = Math.floor((dataValue - tier.cost) * 100);\n    }\n    return { amount: amount, points: points };\n}\n\nexport default ConvertDataToValue;","import * as firebase from 'firebase/app';\nimport 'firebase/firestore'\n\nconst GetFirebase = () => {\n    try {\n        const firebaseConfig = {\n          apiKey: \"AIzaSyBJT5z1sGK3A2NH5r1aZPM3EF_pGAQar1I\",\n          authDomain: \"atlas-bounty-1574529450782.firebaseapp.com\",\n          databaseURL: \"https://atlas-bounty-1574529450782.firebaseio.com\",\n          projectId: \"atlas-bounty-1574529450782\",\n          storageBucket: \"atlas-bounty-1574529450782.appspot.com\",\n          messagingSenderId: \"496812476716\",\n          appId: \"1:496812476716:web:5005c999dbc35b1ca04489\"\n        };\n        firebase.initializeApp(firebaseConfig);\n    } catch {\n\n    }\n    return firebase.app();\n}\n\nexport default GetFirebase;","import GetFirebase from \"./GetFirebase\";\n\nconst GetSubscribedTier = (uid: string, callback: (tier: any | null) => void) => {\n    const app = GetFirebase();\n    const db = app.firestore();\n    if (uid !== null) {\n        db.collection('users').doc(uid).get().then((snapshot: any) => {\n            if (snapshot.exists) {\n                const tierId = snapshot.data().tier;\n                db.collection('tiers').doc(tierId).get().then((snapshot: any) => {\n                    if (snapshot.exists) {\n                        callback(snapshot.data());\n                    } else {\n                        callback(null);\n                    }\n                });\n            } else {\n                callback(null);\n            }\n        }).catch((err: any) => {\n            console.log(err);\n            callback(null);\n        });\n    }\n   \n}\n\nexport default GetSubscribedTier;","const GetPeriodStartDate = (period: any, userData: any): any => {\n    const date = new Date();\n    if (period === 'month') {\n        date.setDate(userData.billingDayOfMonth);\n        if (userData.billingDayOfMonth > (new Date()).getDate()) {\n            date.setMonth(date.getMonth() - 1);\n        }\n        date.setHours(0, 0, 0, 0);\n    } else if (period === 'week') {\n        // add week support\n    }\n    return date;\n}\n\nexport default GetPeriodStartDate;","import GetFirebase from \"./GetFirebase\";\n\nconst GetUserData = (uid: string, callback: (userData: any | null) => void) => {\n    const app = GetFirebase();\n    const db = app.firestore();\n    if (uid !== null) {\n        db.collection('users').doc(uid).get().then((snapshot: any) => {\n            if (snapshot.exists) {\n                callback(snapshot.data())\n            } else {\n                callback(null);\n            }\n        }).catch((err: any) => {\n            console.log(err);\n            callback(null);\n        });\n    }\n   \n}\n\nexport default GetUserData;","import React from 'react';\nimport { IonHeader, IonToolbar, IonTitle, IonButtons, IonAvatar, IonIcon, IonBackButton } from \"@ionic/react\";\nimport { Link } from 'react-router-dom';\nimport { settings, close } from 'ionicons/icons';\n\ntype TitleBarProps = {\n    profileImage: string,\n    showClose: boolean\n};\n\nclass TitleBar extends React.Component<TitleBarProps, any> {\n    constructor(props: TitleBarProps) {\n        super(props)\n        this.state = {\n            profileImage: props.profileImage,\n            showClose: props.showClose\n        }\n    }\n\n    componentWillReceiveProps(props: TitleBarProps) {\n        this.setState((state: any) => ({ profileImage: props.profileImage }))\n    }\n\n    render() {\n        return <IonHeader>\n            <IonToolbar color=\"dark\">\n                <IonTitle>ATLAS BOUNTY</IonTitle>\n                <IonButtons slot=\"start\">\n                    <IonBackButton/>\n                    <IonAvatar style={{ width: '2.5em', height: '2.5em', marginLeft: '10px' }} slot=\"icon-only\">\n                        <img src={this.state.profileImage}/>\n                    </IonAvatar>\n                </IonButtons>\n                <IonButtons slot=\"primary\">\n                    { (this.state.showClose) ? null : <Link to=\"/settings\" style={{marginRight: '10px'}}>\n                        <IonIcon icon={settings} color='light' size='large'></IonIcon>\n                    </Link>\n                    }\n                </IonButtons>\n            </IonToolbar>\n        </IonHeader>\n    }\n}\n\nexport default TitleBar;","import { IonContent, IonPage, IonAvatar, IonButton, IonIcon, IonHeader, IonTitle, IonToolbar, IonButtons, IonCard, IonCardTitle, IonCardSubtitle, IonCardHeader, IonFooter } from '@ionic/react';\nimport React from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport GetFitnessData from '../../domain/GetFitnessData';\nimport ConvertDataToValue from '../../domain/ConvertDataToValue';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport GetFirebase from '../../domain/GetFirebase';\nimport GetSubscribedTier from '../../domain/GetSubscribedTier';\nimport UnsubscribeFromTier from '../../domain/UnsubscribeFromTier';\nimport GetPeriodStartDate from '../../domain/GetPeriodStartDate';\nimport { informationCircle, star, settings } from 'ionicons/icons';\nimport GetUserData from '../../domain/GetUserData';\nimport TitleBar from '../TitleBar';\n\nconst flexContainer = {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    'flex-direction': 'column',\n    height: '100%'\n}\n\nclass Home extends React.Component<any, any> {\n    constructor(props: any) {\n        super(props);\n        // const accessToken = CheckLoggedIn();\n        this.state = {\n            redirectToLogin: false,\n            redirectToSignUp: false,\n            profileImage: '',\n            givenName: '',\n            tier: null,\n            value: 0,\n            points: 0,\n            data: { steps: 0 },\n        };        \n        GetFirebase();\n        if (firebase.auth().currentUser != null) this.userLoaded(firebase.auth().currentUser);\n        firebase.auth().onAuthStateChanged((user: any) => { this.userLoaded(user) });\n    }\n\n    userLoaded(user: any) {\n        if (user) {\n            const token = localStorage.getItem('access-token') as string;\n            GetSubscribedTier(user.uid, (tier: any) => { \n                console.log(tier);\n                if (tier === null) {\n                    this.setState((state: any) => ({ redirectToSignUp: true }));\n                } else {\n                    GetUserData(user.uid, (data: any) => {\n                        const start = GetPeriodStartDate(tier.period, data);\n                        GetFitnessData(token, start, new Date(), (steps: number) => {\n                            const result = ConvertDataToValue({ steps }, tier);\n                            this.setState((state: any) => ({ value: result.amount, points: result.points, data: {steps}, tier }));\n                        });\n                    });\n                }\n            });\n            this.setState((state: any) => ({ \n                profileImage: user.photoURL, \n                displayName: user.displayName \n            }));\n        } else {\n            this.setState((state: any) => ({ redirectToLogin: true }));\n        }\n    }\n\n    render() {\n        return (\n            <IonPage>\n                <TitleBar profileImage={this.state.profileImage} showClose={false}></TitleBar>\n                <IonContent>\n                    {\n                       this.state.redirectToLogin ? <Redirect to='/login'/> : <div></div>\n                    }\n                    {\n                       this.state.redirectToSignUp ? <Redirect to='/signup'/> : <div></div>\n                    }\n                    <div style={flexContainer}>\n                        <IonCard className='font' style={{width: '350px'}}>\n                            <IonCardHeader>\n                                <IonCardSubtitle>EARNINGS</IonCardSubtitle>\n                                <IonCardTitle>\n                                    <span style={{fontSize: '1em'}}>$</span><span style={{fontSize: '4em'}}>{this.state.value}</span>\n                                    <span style={{fontSize: '1em'}}>/{(this.state.tier) ? this.state.tier.cost : ''}</span>\n                                    <IonIcon icon={informationCircle} color='dark'></IonIcon>\n                                </IonCardTitle>\n                            </IonCardHeader>\n                        </IonCard>\n                        <IonCard className='font' style={{width: '350px'}}>\n                            <IonCardHeader>\n                                <IonCardSubtitle>STEPS</IonCardSubtitle>\n                                <IonCardTitle>\n                                    <span className='label' style={{ fontSize: '3em' }}>{\n                                        this.state.data.steps.toLocaleString()\n                                    }</span>\n                                </IonCardTitle>\n                            </IonCardHeader>\n                        </IonCard>\n                        <IonCard className='font' style={{width: '350px'}}>\n                            <IonCardHeader>\n                                <IonCardSubtitle>POINTS THIS {\n                                    (this.state.tier) ? this.state.tier.period.toUpperCase() : ''\n                                }\n                                </IonCardSubtitle>\n                                <IonCardTitle>\n                                    <IonIcon icon={star} color='dark' size='large'></IonIcon>\n                                    <span className='label' style={{ fontSize: '3em' }}>{\n                                        this.state.points\n                                    }</span>\n                                </IonCardTitle>\n                            </IonCardHeader>\n                        </IonCard>\n                        \n                        <div style={{flexGrow: 1}}></div>\n                        \n                    </div>\n                </IonContent>\n            </IonPage>\n        );\n    }\n}\n\nexport default Home;\n","import { IonContent, IonPage, IonButton } from '@ionic/react';\nimport React from 'react';\nimport { Redirect } from 'react-router';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport GetFirebase from '../../domain/GetFirebase';\n\nconst flexContainer = {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    'flex-direction': 'column',\n    height: '100%'\n}\n\nclass SignIn extends React.Component<any, any> {\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            redirectToHome: false\n        }\n        GetFirebase();\n    }\n\n    signin() {\n        const provider = new firebase.auth.GoogleAuthProvider();\n        provider.addScope('https://www.googleapis.com/auth/fitness.activity.read')\n        firebase.auth().signInWithPopup(provider).then((result: any) => {\n            const token = result.credential.accessToken;\n            localStorage.setItem('access-token', result.credential.accessToken);\n            // localStorage.setItem('profile-image', result.user.photoURL);\n            // localStorage.setItem('given-name', result.user.displayName);\n            this.setState((state: any) => ({ redirectToHome: true }));\n        });\n    }\n\n    render() {\n        return <IonPage>\n            <IonContent>\n                <div style={flexContainer}>\n                    <div style={{ flexGrow: 1}}></div>\n                    <h1>ATLAS BOUNTY</h1>\n                    <h2>The world is your bounty.</h2>\n                    <div style={{ flexGrow: 1}}></div>\n                    <IonButton onClick={() => this.signin()}>\n                        Log In With Google\n                    </IonButton>\n                    {\n                        this.state.redirectToHome ? <Redirect to=\"/home\"/> : <div></div>\n                    }\n                    <div style={{ flexGrow: 1}}></div>\n                </div>\n            </IonContent>\n        </IonPage>\n    }\n    \n}\n\nexport default SignIn;\n","import GetFirebase from \"./GetFirebase\"\n\nconst GetSubscriptionTiers = (callback: (tiers: any) => void): any => {\n    const app = GetFirebase();\n    const db = app.firestore();\n    db.collection('tiers').get().then((snapshot: any) => {\n        const tiers = snapshot.docs.map((doc: any) => ({ id: doc.id, ...doc.data() }));\n        callback(tiers);\n   });\n}\n\nexport default GetSubscriptionTiers;","import * as firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport GetFirebase from './GetFirebase';\n\nconst SubscribeToTier = (tierId: string, done: () => void) => {\n    const app = GetFirebase();\n    const db = app.firestore();\n    if (app.auth().currentUser) {\n        const next = new Date();\n        next.setMonth(next.getMonth() + 1);\n        const dayOfMonth = next.getDate();\n        const user = (app.auth().currentUser as any);\n        const userRef = db.collection('users').doc(user.uid);\n        // TODO: add week support?\n        const setWithMerge = userRef.set({\n            tier: tierId,\n            billingDayOfMonth: dayOfMonth,\n            nextBillingDate: next,\n            cancelAfterNextBilling: false,\n        }, { merge: true }).then(() => {\n            done();\n        });\n    }\n}\n\nexport default SubscribeToTier;","import { IonContent, IonPage, IonButton, IonCard, IonCardHeader, IonCardTitle, IonCardSubtitle, IonCardContent, IonCheckbox } from '@ionic/react';\nimport React from 'react';\nimport { Redirect } from 'react-router';\nimport GetSubscriptionTiers from '../../domain/GetSubscriptionTiers';\nimport SubscribeToTier from '../../domain/SubscribeToTier';\nimport * as firebase from 'firebase/app'\n\nconst flexContainer = {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    'flex-direction': 'column',\n    height: '100%'\n}\n\nclass SignUp extends React.Component<any, any> {\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            redirectToHome: false,\n            redirectToLogin: false,\n            tiers: [],\n        };\n        GetSubscriptionTiers((tiers: any) => {\n            this.setState((state: any) => ({ tiers }));\n        });\n    }\n\n    didClickTier(tier: any) {\n        SubscribeToTier(tier.id, () => {\n            this.setState((state: any) => ({ redirectToHome: true }));\n        });\n    }\n    \n    logout() {\n        firebase.auth().signOut()\n        localStorage.removeItem('access-token');\n        this.setState((state: any) => ({ redirectToLogin: true }));\n    }\n\n    render() {\n        return <IonPage>\n            <IonContent>\n            {\n                this.state.redirectToLogin ? <Redirect to='/login'/> : <div></div>\n            }\n                <div style={flexContainer}>\n                    <h1>ATLAS BOUNTY</h1>\n                    <h2>Subscribe</h2>\n                    {\n                        this.state.redirectToHome ? <Redirect to=\"/home\"/> : <div></div>\n                    }\n                    {\n                        this.state.tiers.map((tier: any) => (\n                            <IonCard className='hover-card' onClick={() => {this.didClickTier(tier)}}>\n                                <IonCardHeader style={{width: 350}}>\n                                    <IonCardSubtitle>\n                                        { tier.name.toUpperCase() }\n                                    </IonCardSubtitle>\n                                    <IonCardTitle>\n                                        $<span style={{fontSize: '3em'}}>{ tier.cost }</span>/{tier.period}\n                                    </IonCardTitle>\n                                </IonCardHeader>\n                                <IonCardContent>\n                                    {tier.description}\n                                </IonCardContent>\n                            </IonCard>\n                        ))\n                    }\n                    <IonButton onClick={() => this.logout()} fill={'clear'}>Sign Out</IonButton>\n                </div>\n            </IonContent>\n        </IonPage>\n    }\n    \n}\n\nexport default SignUp;\n","import * as firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport GetFirebase from './GetFirebase';\n\nconst UnsubscribeFromTier = (done: () => void) => {\n    const app = GetFirebase()\n    const db = app.firestore();\n    if (app.auth().currentUser) {\n        const user = (app.auth().currentUser as any);\n        const userRef = db.collection('users').doc(user.uid);\n        userRef.set({\n            cancelAfterNextBilling: true\n        }, { merge: true }).then(() => {\n            done();\n        });\n    }\n}\n\nexport default UnsubscribeFromTier;","import React from 'react';\nimport { IonPage, IonContent, IonList, IonListHeader, IonItem, IonLabel, IonNote, IonButtons, IonButton } from '@ionic/react';\nimport TitleBar from '../TitleBar';\nimport * as firebase from 'firebase/app';\nimport GetFirebase from '../../domain/GetFirebase';\nimport GetUserData from '../../domain/GetUserData';\nimport GetSubscribedTier from '../../domain/GetSubscribedTier';\nimport UnsubscribeFromTier from '../../domain/UnsubscribeFromTier';\nimport { Redirect } from 'react-router';\nimport undefined from 'firebase/empty-import';\n \nclass Settings extends React.Component<any, any> {\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            profileImage: '',\n            userData: null,\n            tierName: '',\n            redirectToHome: false,\n            userId: ''\n        }\n        GetFirebase();\n        if (firebase.auth().currentUser != null) this.userLoaded(firebase.auth().currentUser);\n        firebase.auth().onAuthStateChanged((user: any) => { this.userLoaded(user) });\n    }\n\n    userLoaded(user: any) {\n        if (user) {\n            const token = localStorage.getItem('access-token') as string;\n            GetUserData(user.uid, (data: any) => {\n                this.setState((state: any) => ({ userId: user.uid, userData: data }))\n                GetSubscribedTier(user.uid, (tier: any) => {\n                    this.setState((state: any) => ({ tierName: tier.name }))\n                });\n            });\n            this.setState((state: any) => ({ \n                profileImage: user.photoURL, \n            }));\n        }\n    }\n\n    logout() {\n        firebase.auth().signOut()\n        localStorage.removeItem('access-token');\n        this.setState((state: any) => ({ redirectToHome: true }));\n    }\n    \n    unsubscribe() {\n        UnsubscribeFromTier(() => {\n            GetUserData(this.state.userId, (data: any) => {\n                this.setState((state: any) => ({ userData: data }))\n            });\n        });\n    }\n\n    render() {\n        return (<IonPage>\n            {\n                (this.state.redirectToHome) ? <Redirect to=\"/home\" /> : <div></div>\n            }\n            <TitleBar profileImage={this.state.profileImage} showClose={true}></TitleBar>\n            <IonContent>\n                <IonList>\n                    <IonListHeader>\n                        BILLING INFORMATION\n                    </IonListHeader>\n                    <IonItem>\n                        <IonLabel>Day of Month</IonLabel>\n                        <IonNote slot=\"end\">{ (this.state.userData) ? this.state.userData.billingDayOfMonth : ''}</IonNote>\n                    </IonItem>\n                    <IonItem>\n                        <IonLabel>Next Billing Date</IonLabel>\n                        <IonNote slot=\"end\">{ \n                            (this.state.userData) ? (\n                                    new Date(this.state.userData.nextBillingDate.seconds * 1000)\n                                ).toLocaleDateString() : ''\n                        }</IonNote>\n                    </IonItem>\n                    <IonListHeader>\n                        ACCOUNT MANAGEMENT\n                    </IonListHeader>\n                    <IonItem>\n                        <IonLabel>Subscription Plan</IonLabel>\n                        {\n                            (this.state.userData) ? ((this.state.userData.cancelAfterNextBilling) ? <IonNote slot=\"end\">Expires After Next Bill</IonNote> : null)\n                                : null\n                        }\n                        <IonNote slot=\"end\">\n                            { this.state.tierName }\n                        </IonNote>\n                    </IonItem>\n                    <IonItem href={process.env.PUBLIC_URL + '/signup'}>\n                        <IonLabel style={{textAlign: 'center'}} color='primary'>CHANGE PLAN</IonLabel>\n                    </IonItem>\n                    <IonItem button onClick={() => this.unsubscribe()} disabled={!this.state.userData || this.state.userData.cancelAfterNextBilling}>\n                        <IonLabel style={{textAlign: 'center'}} color='primary'>UNSUBCRIBE</IonLabel>\n                    </IonItem>\n                    <IonItem button onClick={() => this.logout()}>\n                        <IonLabel style={{textAlign: 'center'}} color='primary'>SIGN OUT</IonLabel>\n                    </IonItem>\n                </IonList>\n            </IonContent>\n        </IonPage>)\n    }\n}\n\nexport default Settings;","import React from 'react';\nimport { Route, Redirect, BrowserRouter, HashRouter } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport '@ionic/react/css/core.css';\nimport Home from './app/home/Home';\nimport './App.css'\nimport SignIn from './app/signin/SignIn';\nimport SignUp from './app/signup/SignUp';\nimport Settings from './app/settings/Settings';\n\nconst App: React.FC = () => (\n  <IonApp>\n    {\n      document.title = 'Atlas Bounty'\n    }\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <IonReactRouter basename={process.env.PUBLIC_URL}>\n        <IonRouterOutlet>\n          <Route path=\"/home\" component={Home} exact={true} />\n          <Route exact path=\"/\" render={() => <Redirect to=\"/home\" />} />\n          <Route path=\"/login\" component={SignIn} exact={true} />\n          <Route path=\"/signup\" component={SignUp} exact={true} />\n          <Route path=\"/settings\" component={Settings} exact={true} />\n        </IonRouterOutlet>\n      </IonReactRouter>\n    </BrowserRouter>\n  </IonApp>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}